<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seguimiento de Metas Anuales</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Seguimiento de Metas Anuales</h1>
    
    <div class="header-controls">
        <button class="add-category-btn" onclick="openCategoryModal()">+ Agregar Nueva Categoría</button>
    </div>
    
    <!-- Gráfico Anual -->
    <div class="graphs-container">
        <div class="graph annual-graph" id="annual-graph">
            <div class="progress-circle">
                <svg viewBox="0 0 36 36">
                    <circle class="background" cx="18" cy="18" r="15.9155"></circle>
                    <circle class="progress annual" cx="18" cy="18" r="15.9155" style="stroke: #ecf0f1;"></circle>
                </svg>
                <div class="progress-value" id="annual-progress">0%</div>
            </div>
            <div class="graph-title">Avance Anual</div>
            <div class="graph-description">Promedio de todas las categorías</div>
        </div>
    </div>
    
    <!-- Gráficos por categoría -->
    <div class="graphs-container" id="categories-container"></div>
    
    <!-- Modal para agregar/editar categoría -->
    <div class="modal" id="category-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="category-modal-title">Nueva Categoría</div>
                <button class="close-modal" onclick="closeCategoryModal()">&times;</button>
            </div>
            <div class="form-group">
                <label>Nombre de la categoría</label>
                <input type="text" id="category-name" placeholder="Ej: Salud">
            </div>
            <div class="form-group">
                <label>Descripción</label>
                <textarea id="category-description" placeholder="Describe el propósito de esta categoría"></textarea>
            </div>
            <div class="form-group">
                <label>Color</label>
                <div class="color-picker-container" id="color-picker"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCategoryModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="saveCategory()">Guardar</button>
            </div>
        </div>
    </div>
    
    <!-- Modal de edición de tareas -->
    <div class="modal" id="tasks-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="tasks-modal-title">Editar Tareas</div>
                <button class="close-modal" onclick="closeTasksModal()">&times;</button>
            </div>
            <ul class="task-list" id="modal-task-list"></ul>
            <div class="add-task-container">
                <input type="text" class="add-task-input" id="new-task-input" placeholder="Nueva tarea">
                <button class="add-task-button" onclick="addNewTask()">Agregar</button>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="confirmDeleteCategory()">Eliminar Categoría</button>
                <button class="btn btn-secondary" onclick="closeTasksModal()">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-analytics.js";

    const firebaseConfig = {
        apiKey: "AIzaSyA2tEhDoNNfCWzl44tC0izKcF_9psYPzs8",
        authDomain: "goal-tracker-f3ef4.firebaseapp.com",
        projectId: "goal-tracker-f3ef4",
        storageBucket: "goal-tracker-f3ef4.firebasestorage.app",
        messagingSenderId: "228396502",
        appId: "1:228396502:web:698d7ac28a745a15a26877",
        measurementId: "G-7QJ2VF1W69"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    </script>

    <!-- Tu app -->
    <script src="app.js"></script>
</body>
</html>
